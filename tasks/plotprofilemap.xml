<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" ?>

<casaxml xmlns="http://casa.nrao.edu/schema/psetTypes.html"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://casa.nrao.edu/schema/casa.xsd
file:///opt/casa/code/xmlcasa/xml/casa.xsd">

<task type="function" name="plotprofilemap" category="visualization">

  <shortdescription>Makes profile map.</shortdescription>
      
  <description>
  The plotprofilemap makes spectral profile map from specified image. 
  The task accepts both CASA image and FITS cube as an input.
  </description>

  <input>
    <param type="string" name="imagename" mustexist="true">
      <description>Input image name (CASA image or FITS)</description>
      <value></value>
    </param>

    <param type="string" name="figfile">
      <description>Output figure name</description>
      <value></value>
    </param>

    <param type="bool" name="overwrite" subparam="true">
      <description>Overwrite existing figfile</description>
      <value>False</value>
    </param>
    
    <param type="string" name="title">
      <description>Title of the plot</description>
      <value></value>
    </param>

	<param type="string" name="linecolor">
	  <description>Line color</description>
	  <value>b</value>
	</param>
	
	<param type="string" name="linestyle">
	  <description>Line style</description>
	  <value>-</value>
	</param>
	
	<param type="double" name="linewidth">
	  <description>Line width in points</description>
	  <value>0.2</value>
	</param>

    <param type="bool" name="separatepanel">
      <description>Separate plots</description>
      <value>True</value>
    </param>
    
    <param type="string" name="plotmasked">
      <description>Masked data handling</description>
      <value>empty</value>
      <allowed kind="enum">
        <value>empty</value>
        <value>text</value>
        <value>zero</value>
        <value>none</value>
        <value>plot</value>
      </allowed>
    </param>
    
    <param type="string" name="maskedcolor" subparam="true">
      <description>Line color for masked data</description>
      <value>gray</value>
    </param>
    
    <param type="bool" name="showaxislabel">
      <description>Show axis labels on the bottom left panel</description>
      <value>False</value>
    </param>
    
    <param type="bool" name="showtick">
      <description>Show axis ticks</description>
      <value>False</value>
    </param>
    
    <param type="bool" name="showticklabel" subparam="true">
      <description>Show axis tick labels on the bottom left panel</description>
      <value>False</value>
    </param>

    <constraints>
      <when param="figfile">
        <notequals type="string" value="">
          <default param="overwrite"><value type="bool">False</value></default>
        </notequals>
      </when>
      <when param="plotmasked">
        <equals type="string" value="empty"/>
        <equals type="string" value="plot">
          <default param="maskedcolor"><value type="string">gray</value></default>
        </equals>
        <equals type="string" value="zero">
          <default param="maskedcolor"><value type="string">gray</value></default>
        </equals>
      </when>
      <when param="showtick">
        <equals type="bool" value="False"/>
        <equals type="bool" value="True">
          <default param="showticklabel"><value type="bool">False</value></default>
        </equals>
      </when>
    </constraints>
  </input>

  <returns type="variant" limittypes="void record">
  </returns>

  <example>

    The plotprofilemap makes spectral profile map from specified image. 
    The task accepts both CASA image and FITS cube as an input.
    
    It is necessary to specify existing CASA image or FITS cube as an 
    imagename. Otherwise, the task will fail. If figfile is specified, 
    profile map is saved as an PNG image. Please set overwrite to False 
    if you don't want to overwrite existing file. 

    Keyword arguments:
    imagename -- input image name (CASA image or FITS cube)
    figfile -- output PNG image name. No output if figfile is empty
               default: '' (no output)
    overwrite -- overwrite existing output file
                 default: False
    title -- title of the plot
             default: '' (no title)
    linecolor -- line color in matplotlib format
                 default: 'b' (blue)
                 example: 'r' (red), 'black', '#ff99ff'
    linestyle -- line style in matplotlib format
                 default: '-' (solid line)
                 example: '..' (dotted line), '.-' (solid line with point marker) 
    linewidth -- line width in points
                 default: 0.2
    separatepanel -- separate panels
                     default: True
    plotmasked -- masked data handling
                  default: 'empty' (show empty panel)
                  option: 'zero' (plot zero level)
                          'none' (show nothing)
                          'text' (show text indicating 'NO DATA')
                          'plot' (plot masked data with different 
                                  color specified by maskedcolor)
    maskedcolor -- line color for masked data
	showaxislabel -- Show axis labels on the bottom left panel
	                 default: False
	showtick -- Show ticks
	            default: False
	showticklabel -- Show tick labels on the bottom left panel
	                 default: False

  </example>

</task>

</casaxml>
